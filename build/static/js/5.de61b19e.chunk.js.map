{"version":3,"sources":["components/AuthForm/AuthForm.module.css","components/AuthForm/AuthForm.js","pages/Auth.js"],"names":["module","exports","AuthForm","useState","isLoading","setIsLoading","emailInputRef","useRef","passwordInputRef","history","useHistory","authCtx","useContext","AuthContext","className","classes","wrapper","onSubmit","event","preventDefault","enteredEmail","current","value","enteredPassword","fetch","method","body","JSON","stringify","email","password","returnSecureToken","headers","then","res","ok","json","data","Error","error","message","login","idToken","replace","catch","err","alert","htmlFor","type","id","required","ref","Button","Auth"],"mappings":"uHACAA,EAAOC,QAAU,CAAC,QAAU,0BAA0B,aAAa,6B,6GCoEpDC,EA/DE,WACf,MAAkCC,oBAAS,GAA3C,mBAAOC,EAAP,KAAkBC,EAAlB,KAEMC,EAAgBC,iBAAO,IACvBC,EAAmBD,iBAAO,IAE1BE,EAAUC,cACVC,EAAUC,qBAAWC,KAyC3B,OACE,0BAASC,UAAWC,IAAQC,QAA5B,UACE,uCACA,uBAAMC,SA1CY,SAACC,GACrBA,EAAMC,iBACN,IAAMC,EAAed,EAAce,QAAQC,MACrCC,EAAkBf,EAAiBa,QAAQC,MAEjDjB,GAAa,GACbmB,MACE,oHACA,CACEC,OAAQ,OACRC,KAAMC,KAAKC,UAAU,CACnBC,MAAOT,EACPU,SAAUP,EACVQ,mBAAmB,IAErBC,QAAS,CACP,eAAgB,sBAInBC,MAAK,SAACC,GAEL,OADA7B,GAAa,GACT6B,EAAIC,GACCD,EAAIE,OAEJF,EAAIE,OAAOH,MAAK,SAACI,GACtB,MAAM,IAAIC,MAAMD,EAAKE,MAAMC,QAC5B,GAEJ,IACAP,MAAK,SAACI,GACL1B,EAAQ8B,MAAMJ,EAAKK,QAASL,EAAKR,OAEjCpB,EAAQkC,QAAQ,SACjB,IACAC,OAAM,SAACC,GACNC,MAAMD,EACP,GACJ,EAIkC/B,UAAWC,IAAQ,cAAlD,UACE,uBAAOgC,QAAQ,QAAf,wBACA,uBAAOC,KAAK,QAAQC,GAAG,QAAQC,UAAQ,EAACC,IAAK7C,IAC7C,uBAAOyC,QAAQ,WAAf,2BACA,uBAAOC,KAAK,WAAWC,GAAG,WAAWC,UAAQ,EAACC,IAAK3C,KACjDJ,GAAa,cAACgD,EAAA,EAAD,oBACdhD,GAAa,yDAIrB,EC1DciD,UANF,WACX,OACE,cAAC,EAAD,GAEH,C","file":"static/js/5.de61b19e.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"AuthForm_wrapper__2f2of\",\"login-form\":\"AuthForm_login-form__2Cr8f\"};","import React, { useContext, useRef, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Button from \"../UI/Button\";\r\nimport classes from \"./AuthForm.module.css\";\r\nimport AuthContext from \"../../store/auth-context\";\r\n\r\nconst AuthForm = () => {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const emailInputRef = useRef(\"\");\r\n  const passwordInputRef = useRef(\"\");\r\n\r\n  const history = useHistory();\r\n  const authCtx = useContext(AuthContext);\r\n\r\n  const submitHandler = (event) => {\r\n    event.preventDefault();\r\n    const enteredEmail = emailInputRef.current.value;\r\n    const enteredPassword = passwordInputRef.current.value;\r\n\r\n    setIsLoading(true);\r\n    fetch(\r\n      \"https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyC-HV4z4G81M-3pUBgWC3xl0pKYCIcxm2c\",\r\n      {\r\n        method: \"POST\",\r\n        body: JSON.stringify({\r\n          email: enteredEmail,\r\n          password: enteredPassword,\r\n          returnSecureToken: true,\r\n        }),\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      }\r\n    )\r\n      .then((res) => {\r\n        setIsLoading(false);\r\n        if (res.ok) {\r\n          return res.json();\r\n        } else {\r\n          return res.json().then((data) => {\r\n            throw new Error(data.error.message);\r\n          });\r\n        }\r\n      })\r\n      .then((data) => {\r\n        authCtx.login(data.idToken, data.email);\r\n       // console.log(data)\r\n        history.replace(\"/store\");\r\n      })\r\n      .catch((err) => {\r\n        alert(err);\r\n      });\r\n  };\r\n  return (\r\n    <section className={classes.wrapper}>\r\n      <h2>LOGIN</h2>\r\n      <form onSubmit={submitHandler} className={classes[\"login-form\"]}>\r\n        <label htmlFor=\"email\">Your Email</label>\r\n        <input type=\"email\" id=\"email\" required ref={emailInputRef} />\r\n        <label htmlFor=\"password\">Your Password</label>\r\n        <input type=\"password\" id=\"password\" required ref={passwordInputRef} />\r\n        {!isLoading && <Button>LOGIN</Button>}\r\n        {isLoading && <p>Sending request....</p>}\r\n      </form>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default AuthForm;\r\n","import React from 'react'\r\nimport AuthForm from '../components/AuthForm/AuthForm'\r\n\r\nconst Auth = () => {\r\n  return (\r\n    <AuthForm />\r\n  )\r\n}\r\n\r\nexport default Auth"],"sourceRoot":""}