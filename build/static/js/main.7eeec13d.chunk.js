(this["webpackJsonpreact-complete-guide"]=this["webpackJsonpreact-complete-guide"]||[]).push([[0],{10:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var c=n(11),a=n(2),r=n.n(a),o=n(1),s=r.a.createContext({token:"",email:"",isLoggedIn:!1,login:function(e,t){},logout:function(){}}),i=function(e){var t=localStorage.getItem("idToken"),n=localStorage.getItem("email"),r=Object(a.useState)(t),i=Object(c.a)(r,2),l=i[0],u=i[1],j=Object(a.useState)(n),d=Object(c.a)(j,2),b=d[0],O=d[1],h={token:l,email:b,isLoggedIn:!!l,login:function(e,t){u(e),localStorage.setItem("idToken",e),localStorage.setItem("email",t),O(t)},logout:function(){u(null),O(null),localStorage.removeItem("idToken"),localStorage.removeItem("email")}};return Object(o.jsx)(s.Provider,{value:h,children:e.children})};t.b=s},14:function(e,t,n){e.exports={header:"Header_header__jqpBy",active:"Header_active__3k5RM",container:"Header_container__2GHHD"}},15:function(e,t,n){e.exports={total:"Cart_total___x9ei",ul:"Cart_ul__3AOet",close:"Cart_close__1W6qb",wrapper:"Cart_wrapper__1AP2M",item:"Cart_item__KjOPB",price:"Cart_price__3JKks",quantity:"Cart_quantity__3MKaj","cart-total":"Cart_cart-total__OpSQz"}},16:function(e,t,n){"use strict";var c=n(2),a=n.n(c).a.createContext({items:[],quantity:0,itemQuantity:0,totalAmount:0,loader:!1,addItem:function(e){},removeItem:function(e){}});t.a=a},23:function(e,t,n){e.exports={container:"CartItems_container__2aYPX","cart-column":"CartItems_cart-column__2g9PD",quantity:"CartItems_quantity__2TLF2",price:"CartItems_price__3UeHH"}},24:function(e,t,n){e.exports={container:"HeaderCartButton_container__2f0AZ",logout:"HeaderCartButton_logout__32yXq",button:"HeaderCartButton_button__2Xu2O",span:"HeaderCartButton_span__3lKZr"}},33:function(e,t,n){e.exports={model:"Model_model__1Loc2","slide-down":"Model_slide-down__1wmA_"}},35:function(e,t,n){e.exports={spinner:"App_spinner__2JNUU","footer-container":"App_footer-container__3Pqe5"}},37:function(e,t,n){"use strict";n(2);var c=n(49),a=n.n(c),r=n(1);t.a=function(e){return Object(r.jsx)("button",{className:a.a.button,onClick:e.onClick,children:e.children})}},49:function(e,t,n){e.exports={button:"Button_button__1wSYz"}},55:function(e,t,n){e.exports={footer:"Footer_footer__1Y6Jo"}},62:function(e,t,n){},94:function(e,t,n){"use strict";n.r(t);var c=n(48),a=n.n(c),r=n(12),o=(n(62),n(7)),s=n(17),i=n(11),l=n(2),u=n.n(l),j=n(3),d=n(16),b=n(37),O=n(32),h=n.n(O),x=n(33),p=n.n(x),m=n(1),f=function(e){return Object(m.jsx)("div",{className:p.a.model,children:Object(m.jsx)("div",{className:p.a.content,children:e.children})})},v=function(e){return h.a.createPortal(Object(m.jsx)(f,{onClose:e.onClose,children:e.children}),document.getElementById("overlay-root"))},_=n(15),g=n.n(_),C=n(50),y=function(e){return Object(m.jsx)(C.a,{className:e.className,onClick:e.onClose})},N=n(23),I=n.n(N),k=function(e){var t=null===e.product.price?0:"$".concat(e.product.price),n=Object(l.useContext)(d.a),c=e.product.id;return Object(m.jsx)("li",{children:Object(m.jsxs)("div",{className:I.a.container,children:[Object(m.jsxs)("div",{className:I.a["cart-column"],children:[Object(m.jsx)("img",{src:e.product.imageUrl,alt:"Cart items"}),Object(m.jsx)("span",{children:e.product.title})]}),Object(m.jsx)("span",{className:I.a.price,children:t}),Object(m.jsxs)("div",{className:I.a.quantity,children:[Object(m.jsx)("span",{children:e.product.quantity}),Object(m.jsx)("button",{onClick:function(){n.removeItem(c)},children:"REMOVE"})]})]})})},w=n(28),S=function(e){var t=Object(l.useContext)(d.a);console.log(t.totalAmount);var n=t.items.map((function(e){return Object(m.jsx)("ul",{className:g.a.ul,children:e&&Object(m.jsx)(k,{product:e})},e.id)}));return Object(m.jsxs)(v,{onClose:e.onClose,children:[Object(m.jsx)(y,{className:g.a.close,onClose:e.onClose}),Object(m.jsxs)("div",{className:g.a.total,children:[Object(m.jsx)("h2",{children:"Cart"}),Object(m.jsxs)("div",{className:g.a.wrapper,children:[Object(m.jsx)("span",{className:g.a.item,children:"ITEM"}),Object(m.jsx)("span",{className:g.a.price,children:"PRICE"}),Object(m.jsx)("span",{className:g.a.quantity,children:"QUANTITY"})]}),!t.loader&&Object(m.jsx)(w.a,{style:{height:"2rem",width:"2rem",margin:"1rem auto",justifyContent:"center",alignItems:"center"},animation:"border",role:"status",children:Object(m.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),t.loader&&Object(m.jsxs)("div",{children:[n,Object(m.jsxs)("span",{className:g.a["cart-total"],children:[Object(m.jsxs)("span",{children:["$",t.totalAmount]}),Object(m.jsx)("strong",{children:"Total"})]})]}),t.loader&&Object(m.jsx)(b.a,{children:"Purchase"})]})]})},q=n(14),E=n.n(q),L=n(24),T=n.n(L),A=n(52),H=n(10),z=function(e){var t=Object(l.useContext)(d.a),n=Object(l.useContext)(H.b);return Object(m.jsx)(l.Fragment,{children:Object(m.jsxs)("div",{className:T.a.container,children:[Object(m.jsx)("button",{className:T.a.logout,onClick:function(){n.logout()},children:"LogOut"}),Object(m.jsxs)("button",{className:T.a.button,onClick:e.onClick,children:[Object(m.jsx)(A.a,{size:"20"})," Cart"," ",Object(m.jsx)("span",{className:T.a.span,children:t.itemQuantity})]})]})})},P=function(e){return Object(m.jsxs)("div",{className:E.a.container,children:[Object(m.jsx)("h1",{children:"THIS IS WILLY'S WEBSITE. "}),e.children]})},B=function(e){var t=Object(l.useContext)(H.b).isLoggedIn;return Object(m.jsxs)(l.Fragment,{children:[Object(m.jsxs)("header",{className:E.a.header,children:[Object(m.jsx)(r.c,{exact:!0,activeClassName:E.a.active,to:"/",children:"HOME"}),Object(m.jsx)(r.c,{activeClassName:E.a.active,to:"/store",children:"STORE"}),Object(m.jsx)(r.c,{activeClassName:E.a.active,to:"/about",children:"ABOUT"}),!t&&Object(m.jsx)(r.c,{activeClassName:E.a.active,to:"/login",children:"LOGIN"}),t&&Object(m.jsx)(r.c,{activeClassName:E.a.active,to:"/contact-us",children:"CONTACT-US"}),t&&Object(m.jsx)(z,{onClick:e.onShowCart})]}),Object(m.jsx)(P,{})]})},M=n(29),U=n(55),Q=n.n(U),J=function(){return Object(m.jsxs)("footer",{className:Q.a.footer,children:[Object(m.jsx)("h1",{children:"The Generics"}),Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{children:Object(m.jsx)("a",{href:"https://www.youtube.com",children:Object(m.jsx)(M.c,{color:"red",size:"35px"})})}),Object(m.jsx)("li",{children:Object(m.jsx)("a",{href:"https://spotify.com",children:Object(m.jsx)(M.b,{color:"green",size:"30px"})})}),Object(m.jsx)("li",{children:Object(m.jsx)("a",{href:"https://facebook.com",children:Object(m.jsx)(M.a,{size:"30px"})})})]})]})},R=n(35),Y=n.n(R),F=n(20),K=n(36),W=n.n(K),D=!0,G=function(e){var t,n=Object(l.useContext)(H.b),c=Object(l.useState)([]),a=Object(i.a)(c,2),r=a[0],u=a[1],j=Object(l.useState)(0),b=Object(i.a)(j,2),O=b[0],h=b[1],x=Object(l.useState)(0),p=Object(i.a)(x,2),f=p[0],v=p[1],_=Object(l.useState)(!1),g=Object(i.a)(_,2),C=g[0],y=g[1],N=null===(t=n.email)||void 0===t?void 0:t.split(".").join(""),I=null===N||void 0===N?void 0:N.split("@").join("");Object(l.useEffect)((function(){y(!1);var e=function(){var e=Object(s.a)(Object(o.a)().mark((function e(){var t;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W.a.get("https://e-commerce-cb528-default-rtdb.firebaseio.com/".concat(I,".json"));case 3:t=e.sent,console.log(t.data),y(!0),null===t.data?u([]):u(t.data),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();e()}),[I]);var k=function(){var e=Object(s.a)(Object(o.a)().mark((function e(t){var n,c;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t),n=!1,(c=Object(F.a)(r)).forEach((function(e,a){console.log(e.id),t.id===e.id&&(n=!0,c[a].quantity=c[a].quantity+t.quantity)})),!1===n?u([].concat(Object(F.a)(r),[t])):(u(c),console.log("has item",c));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(s.a)(Object(o.a)().mark((function e(t){var n;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=Object(F.a)(r)).forEach(function(){var e=Object(s.a)(Object(o.a)().mark((function e(c,a){return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c.id===t&&(1===c.quantity?(console.log("i've got one item ",t),n.splice(a,1),u(n)):(c.quantity--,u(n)));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(l.useEffect)((function(){!function(){if(D){var e=Object(F.a)(r).reduce((function(e,t){return e+t.price*t.quantity}),0);v(e),console.log(e)}else D=!0}()}),[r,O]),Object(l.useEffect)((function(){!function(){if(D){var e=Object(F.a)(r),t=e.reduce((function(e,t){return t.quantity+e}),0);h(t),console.log(e)}else D=!0}()}),[r]),Object(l.useEffect)((function(){var e=function(){var e=Object(s.a)(Object(o.a)().mark((function e(){var t;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(D){e.next=3;break}return D=!0,e.abrupt("return");case 3:return e.prev=3,e.next=6,W.a.put("https://e-commerce-cb528-default-rtdb.firebaseio.com/".concat(I,".json"),r);case 6:t=e.sent,console.log(t),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(){return e.apply(this,arguments)}}();e()}),[I,r]);var S={items:r,itemQuantity:O,totalAmount:f,loader:C,addItem:k,removeItem:w};return Object(m.jsx)(d.a.Provider,{value:S,children:e.children})},X=u.a.lazy((function(){return n.e(7).then(n.bind(null,103))})),Z=u.a.lazy((function(){return n.e(3).then(n.bind(null,107))})),$=u.a.lazy((function(){return Promise.all([n.e(9),n.e(8)]).then(n.bind(null,104))})),V=u.a.lazy((function(){return n.e(6).then(n.bind(null,105))})),ee=u.a.lazy((function(){return n.e(4).then(n.bind(null,106))})),te=u.a.lazy((function(){return n.e(5).then(n.bind(null,108))}));var ne=function(){var e=Object(l.useState)(!1),t=Object(i.a)(e,2),n=t[0],c=t[1],a=Object(l.useContext)(H.b),r=function(){var e=Object(s.a)(Object(o.a)().mark((function e(t){var n,c;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://e-commerce-cb528-default-rtdb.firebaseio.com/userQuery.json",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});case 3:if((n=e.sent).ok){e.next=6;break}throw new Error("Something Went wrong");case 6:c=n.json(),console.log(c),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)(G,{children:[n&&Object(m.jsx)(S,{onClose:function(){c(!1)}}),Object(m.jsx)(B,{onShowCart:function(){c(!0)}}),Object(m.jsx)("main",{children:Object(m.jsx)(l.Suspense,{fallback:Object(m.jsx)("div",{className:Y.a.spinner,children:Object(m.jsx)(w.a,{style:{flex:1,textAlign:"center"},animation:"border",role:"status",children:Object(m.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}),children:Object(m.jsxs)(j.d,{children:[Object(m.jsx)(j.b,{path:"/",exact:!0,children:Object(m.jsx)(X,{})}),Object(m.jsxs)(j.b,{path:"/store",exact:!0,children:[a.isLoggedIn&&Object(m.jsx)(Z,{}),!a.isLoggedIn&&Object(m.jsx)(j.a,{to:"/login"})]}),Object(m.jsxs)(j.b,{path:"/store/:productDetails",children:[a.isLoggedIn&&Object(m.jsx)($,{}),!a.isLoggedIn&&Object(m.jsx)(j.a,{to:"/login"})]}),Object(m.jsx)(j.b,{path:"/about",children:Object(m.jsx)(ee,{})}),Object(m.jsx)(j.b,{path:"/login",children:Object(m.jsx)(te,{})}),Object(m.jsxs)(j.b,{path:"/contact-us",children:[a.isLoggedIn&&Object(m.jsx)(V,{onAddUserQuery:r}),!a.isLoggedIn&&Object(m.jsx)(j.a,{to:"/login"})]})]})})}),Object(m.jsx)("div",{className:Y.a["footer-container"],children:Object(m.jsx)(J,{})})]})};n(93);a.a.createRoot(document.getElementById("root")).render(Object(m.jsx)(H.a,{children:Object(m.jsx)(r.a,{children:Object(m.jsx)(ne,{})})}))}},[[94,1,2]]]);
//# sourceMappingURL=main.7eeec13d.chunk.js.map